function appendItemService(){var e="<div class='items'><div class='col-sm-6 one'><select type='text' name='item-service"+items+"' class='form-control' id='service"+items+"' placeholder='Service Category'></select></div><div class='col-sm-6 two'><input type='text' disabled='true' name='price"+items+"' class='form-control' id='price"+items+"' placeholder='Price'></div></div>";$(".col-sm-10.adder").append(e),$("#service"+items).select2({placeholder:"test",data:d}),items=$(".col-sm-10.adder .items").length,preventAddButton(),$(".col-sm-6.one select#service"+(items-1)).change(function(){$.ajax({type:"POST",url:base_url+"dashboard/getby",data:{id_service:$(".col-sm-6.one select#service"+(items-1)+" option:selected").attr("value")},dataType:"json",success:function(e){priceTotal=0,trucking.resultBy=e,$(".col-sm-6.two input#price"+(items-1)).val(trucking.resultBy[0].price);for(var t=0;t<$(".col-sm-6.two input").length;t++)priceTotal+=parseInt($(".col-sm-6.two input#price"+t).val());$(".col-sm-10 input#total-price").val(priceTotal);var o=$(".col-sm-10 input#total-price").val();$(".sum").val(o),preventAddButton()},error:function(e,t,o){console.log(e),console.log(t),console.log(o)}})}),addHiddenInput()}function removeLastItem(){$(".col-sm-10.adder div.items:last-child").remove(),items=$(".col-sm-10.adder .items").length,priceTotal=0;for(var e=0;e<$(".col-sm-6.two input").length;e++)priceTotal+=parseInt($(".col-sm-6.two input#price"+e).val());$(".col-sm-10 input#total-price").val(priceTotal),$(".col-sm-10.adder .items").length<=0&&$("#add").removeAttr("disabled");var t=$(".col-sm-10.adder .items").length;$(".count-list").val(t)}function resetItem(){$(".col-sm-10.adder div.items").remove(),$(".col-sm-10 input#total-price").val(""),$(".col-sm-10.adder .items").length<=0&&$("#add").removeAttr("disabled"),items=0,$(".count-list").val(0),$(".sum").val(0)}function preventAddButton(){var e=$(".col-sm-10.adder .items").length;""==$(".col-sm-6.two input#price"+(e-1)).val()?$("#add").attr({disabled:"true"}):$("#add").removeAttr("disabled")}function addHiddenInput(){var e=$(".col-sm-10.adder .items").length;$(".count-list").val(e)}function exportExcel(){var e=$(".table-responsive");$.ajax({type:"POST",url:base_url+"dashboard/exportExcel",data:{html:e[0].innerHTML},dataType:"json",error:function(e,t,o){console.log(e),console.log(t),console.log(o)}}).done(function(e){var t=$("<a>");t.attr("href",e.file),$("body").append(t),t.attr("download","file.xls"),t[0].click(),t.remove()})}var trucking,d=[],priceTotal=0,items=$(".col-sm-10.adder .items").length;$(document).ready(function(){items=$(".col-sm-10.adder .items").length,$.ajax({url:base_url+"dashboard/getCategory",dataType:"json",success:function(e){trucking=e,d=$.map(trucking,function(e){return e.id=e.id||e.id_service,e.text=e.text||e.category,delete e.id_service,delete e.category,e}),$("#service0").select2({placeholder:"test",data:d})},error:function(e,t,o){console.log(e),console.log(t),console.log(o)}}),preventAddButton(),$("#service0").change(function(){$.ajax({type:"POST",url:base_url+"dashboard/getby",data:{id_service:$("#service0 option:selected").attr("value")},dataType:"json",success:function(e){trucking.resultBy=e,priceTotal=0,$("#price0").val(trucking.resultBy[0].price);for(var t=0;t<$(".col-sm-6.two input").length;t++)priceTotal+=parseInt($(".col-sm-6.two input#price"+t).val());$(".col-sm-10 input#total-price").val(priceTotal);var o=$(".col-sm-10 input#total-price").val();$(".sum").val(o),preventAddButton()},error:function(e,t,o){console.log(e),console.log(t),console.log(o)}})}),$(".form-control.date").datepicker({altField:"#actualDate",dateFormat:"dd-mm-yy",changeMonth:!0,changeYear:!0,autoSize:!0,yearRange:"-25:+50"})});